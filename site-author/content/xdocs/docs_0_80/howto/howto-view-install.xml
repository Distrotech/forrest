<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2002-2005 The Apache Software Foundation or its licensors,
  as applicable.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE howto PUBLIC "-//APACHE//DTD How-to V2.0//EN" "http://forrest.apache.org/dtd/howto-v20.dtd">

<howto>
 <header>
  <title>How to install the views v1 (to be deprecated)</title>
  <abstract>
    This How-To describes the setup of the plugins (needed to work with forrest:views and forrest:contracts) and a fresh seed site.
  </abstract>
  <last-modified-content-date date="2005-10-04"/>
 </header>

  <audience title="Intended Audience">

<warning>
"Views" are new functionality which is still in development phase. That is why it is in the
"whiteboard" section of the Forrest distribution.
</warning>

<warning>
This document relates to an early development version of "views" (v1).
Please use the current development instead. Start at
<a href="site:howto/dispatcher/install">howto-structurer-install</a>.
</warning>

    <p>
      Developers who are using the old version of "views v1" development.
    </p>
  </audience>
  
  <purpose title="Purpose">
    <p>
      To help with installing views v1. This is the "getting started" setup guide.
    </p>
  </purpose>

  <prerequisites title="Prerequisites">
    <ul>
      <li>Need the SVN trunk version of Forrest for using views v1 because it is in an early stage.</li>
      <li>Read <a href="site:v0.80//howto/buildPlugin">How to Build a Plugin</a>
        especially the section about using Forrest's own Ant.</li>
    </ul>
<warning>
Need a recent version of SVN trunk. If you had a working site using the old
views v1 development in trunk, and don't want to use the new views v2 plugins (see
<a href="http://marc.theaimsgroup.com/?l=forrest-dev&amp;m=112839617103846">mail</a>). We nailed 
the views v1 plugins to a stable version, just follow this howto and you will have no problems.
</warning>
  </prerequisites>

  <steps title="Steps">
    <p>
      The process of setting up the plugin is quite heavy. We promise it will be easier in the future. 
      Some of the instructions need to be modified with your local settings.
    </p>
    <section id="localBuild">
      <title>Build the internal.structurer and the output.themes plugins</title>
      <p>
        Build and deploy the two old "views" plugins.
        Change to a terminal window of your choice
        and go (cd) to the trunk version of forrest {forrest-trunk}. Then do an SVN update and after this 
        deploy both plugins locally.
      </p>
      <source>
cd {forrest-trunk}
svn up
cd whiteboard/plugins/org.apache.forrest.plugin.internal.view/
ant local-deploy
cd ../org.apache.forrest.plugin.output.viewHelper.xhtml/
ant local-deploy
      </source>
      <p>
        Alternatively, run the script <code>etc/views.sh</code>
      </p>
    </section>
    <section id="newSeed">
      <title>Seed a new project</title>
      <p> 
	Go to the directory where you want to seed a new project and seed it. 
      </p>
      <source>
cd ~/src/newSeed
forrest seed
      </source>
    </section>
    <section id="forrestProperties">
      <title>Modifying forrest.properties</title>
      <p>
        Tell forrest that we are using the view plugins. Edit
        forrest.properties to add the required plugins:
      </p>
      <source>
project.required.plugins=org.apache.forrest.plugin.output.viewHelper.xhtml,org.apache.forrest.plugin.internal.view
      </source>
      <p>
	     Change the project skin to leather-dev. The reason is that the plugins are still
       not independent from the "old fashion skins".  
      </p>
      <note>We are exchanging only
	     site2xhtml.xsl of leather-dev skin with the plugins, and some contracts are based
	     on e.g. document2html.xsl output of leather-dev.</note>
     <source>
project.skin=leather-dev
      </source>
    </section>
    <section id="testing">
      <title>Test your new view based project</title>
      <p> 
        Now you have finished the preparation and the setup to finally do
      </p>
      <source>
forrest run
      </source>
      <p>Then point to <code>http://localhost:8888/</code> and you will see the default
        views-based site.</p>
    </section>
    <section id="availableContracts">
	    <title>Available contracts</title>
	    <p> 
	     To start working with views, you need to know which contracts you can use. 
	     For this we will install another plugin <code>org.apache.forrest.plugin.input.viewHelper.xhtml.ls</code>.
	     The setup is:
	    </p>
	    <source>
cd {forrest-trunk}
svn up
cd whiteboard/plugins/org.apache.forrest.plugin.input.viewHelper.xhtml.ls/
ant local-deploy
</source>
			<p>
        The newly installed plugin will show the available contracts as html pages.
        First we have to tell Forrest that we are planning to use the new plugin. We will do that
        by editing the forrest.properties of the <a href="#newSeed">newSeed</a> 
        to add the plugin:
      </p>
      <source>
project.required.plugins=org.apache.forrest.plugin.input.viewHelper.xhtml.ls
      </source>
      <p>
        Now point your browser to <code>http://localhost:8888/ls.contracts.html</code>. 
        On this page you will find all contracts that you can use in your project.
      </p>
    </section>
  </steps>
  <extension title="Further Reading">
    <p>
      Congratulations you are now able to work with views. 
      From here we recommend to read the following How-To's:
    </p>
    <ul>
      <li><a href="site:v0.80//howto/view/DSL">Getting started with forrest:view DSL</a> </li>
      <li><a href="site:v0.80//howto/view/contracts">Create your own contract implementation</a> </li>
    </ul>
  </extension>
  <feedback title="Feedback">
    <p>
      Please provide feedback about this document via the "dev"
      <a href="site:mail-lists">mailing list</a>.
    </p>
  </feedback>
</howto>
