<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2002-2005 The Apache Software Foundation or its licensors,
  as applicable.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE howto PUBLIC "-//APACHE//DTD How-to V2.0//EN" "http://forrest.apache.org/dtd/howto-v20.dtd">

<howto>
 <header>
  <title>How to install the "dispatcher"</title>
  <abstract>
    This How-To describes the setup of the plugins (needed to work with forrest:views and forrest:contracts) and a fresh v2 seed site.
  </abstract>
  <last-modified-content-date date="2005-10-04"/>
 </header>

  <audience title="Intended Audience">

<warning>
The "Dispatcher" (aka "Views") is new functionality which is still in development phase. That is why it is in the
"whiteboard" section of the Forrest distribution. This HowTo is a good start but still needs more work.
</warning>
    <p>
      Developers who want to get started with "dispatcher" development and want to help testing and developing the "dispatcher".
    </p>
  </audience>
  
  <purpose title="Purpose">
    <p>
      Quick guide installing the "dispatcher". This is the "getting started" setup guide.
    </p>
  </purpose>

  <prerequisites title="Prerequisites">
    <ul>
      <li>Need the SVN trunk version of Forrest for using the "dispatcher" because it is in an early stage.</li>
      <li>Read <a href="site:v0.80//howto/buildPlugin">How to Build a Plugin</a>
        especially the section about using Forrest's own Ant.</li>
      <li>Installing a mozilla browser and the forrestbar helps a lot in developing.</li>
    </ul>
  </prerequisites>

  <steps title="Steps">
    <p>
      The process of setting up the plugin should be easy. Still it has to many stages and it
       will become easier in the future.
    </p>
    <section id="localBuild">
      <title>Build the internal.structurer and the output.themes plugins</title>
      <p>
        The first step is to build and deploy the internal.structurer and the output.themes plugins. Change to a terminal window of your choice
        and go (cd) to the trunk version of forrest {forrest-trunk}. Then do an SVN update.
      </p>
      <source>
cd {forrest-trunk}
svn up
</source>
      <p>
        After this deploy both plugins locally.</p>
       <source>
cd whiteboard/plugins/org.apache.forrest.plugin.internal.structurer/
ant local-deploy
cd ../org.apache.forrest.plugin.output.themer/
ant local-deploy
      </source>
      <p>
        Alternatively, run the script <code>etc/structurer.sh</code> *after* you did an update.
      </p>
    </section>
    <section id="newSeed">
      <title>Seed a new project</title>
      <p> Go to the directory where you want to seed a new project and seed it 
        (we recommend the following). </p>
     <note>
       For the moment we will use a special seed template called seed-v2. We still 
        need to fix issues of the dispatcher that it really can replace old 
        fashion skins. Like performance, standalone contracts, other testing output/input formats - using POJO based 
        processing will help solving this.  All this will ATM happen in the v2 seed-target till the dispatcher will 
        be realesed to the stable plugins. So make regular updates of your forrest-trunk to keep track.
     </note>
     <warning>
      The way we develope contracts will/may change with introduction of java based processing rather then xsl. Please keep this in mind
        and help updating the documentation by sending patches. TIA. ;-)
     </warning>
      <source>cd ~/src/ 
mkdir v2 
cd v2/ 
forrest seed-v2 </source>
<note>Another way would be using the template directly in forrest. That enables you to send patches directly agains the seed-v2. ;-)
  As well worth if you just want to see current developing state and do not want to play with the dispatcher yet.</note>
      <source>cd {forrest-trunk}/main/template-sites/v2/
forrest run</source>
    </section>
    <section id="forrestProperties">
      <title>Modifying forrest.properties (HEADSUP: if you are *not* using the seed-v2 target nor v2/)</title>
      <p>
        Tell forrest that we are using the dispatcher plugins. Edit
        forrest.properties to add the required plugins:
      </p>
      <source>
project.required.plugins=org.apache.forrest.plugin.output.themer,org.apache.forrest.plugin.internal.structurer
      </source>
    </section>
    <section id="testing">
      <title>Test your new "dispatcher" based project</title>
      <p> 
        Now you have finished the preparation and the setup to finally do
      </p>
      <source>
forrest run</source>
      <p>Point your browser to <code>http://localhost:8888/</code> and you will see the default
        dispatcher-based site.</p>
    </section>
    <section id="availableContracts">
      <title>Available contracts</title>
      <p> 
       To start working with the dispatcher, you need to know which contracts you can use. 
       If you used the seed-v2 then click on the samples tab. You can find links there which leads to 
       the available contracts (same as forrestbar).</p>
      <p>
       If you are a mozilla user and have the forrestbar installed, then klick on menu point "Devs"
       (ls.contracts and/or ls.contracts.project)
      </p><p>
        Now point your browser to e.g. <code>http://localhost:8888/ls.contracts.html</code>. 
        On this page you will find all contracts that you can use in your project.
      </p>
    </section>
  </steps>
  <extension title="Further Reading">
    <p>
      Congratulations you are now able to work with the dispatcher. 
      From here we recommend to read the following How-To's (in this order):
    </p>
    <ul>
      <li><a href="site:v0.80//howto/dispatcher/structurer">Getting started with the "structurer"</a> </li>
      <li><a href="site:v0.80//howto/dispatcher/contracts">Create your own contract implementation</a> </li>
    </ul>
  </extension>
  <feedback title="Feedback">
    <p>
      Please provide feedback about this document via the "dev"
      <a href="site:mail-lists">mailing list</a>.
    </p>
  </feedback>
</howto>
