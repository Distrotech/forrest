<?xml version="1.0" ?>
<project
 name="forrestdoc" default="ws" basedir=".">

   <!-- init -->
   <tstamp />
   <taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
   
   <property name="ws.dir"  value="../../.." />

   <target name="ws" 
           description="create all possible docs for this workspace">

    <!--
    <pathconvert pathsep="," property="ws.project.dirs.list" refid="ws.project.dirs"/>
    <echo>${ws.project.dirs.list}</echo>
    -->
    <for param="current.project.dir">
      <path>
        <dirset dir="${ws.dir}" id="ws.project.dirs">
           <include name="*"/>
           <exclude name=".*"/>
           <exclude name="build"/>
        </dirset>
      </path>
        <sequential>
         <echo>START @{current.project.dir}</echo>
         <trycatch property="foo" reference="bar">
         <try>
            <ant antfile="build.xml" dir="." target="project"
                inheritAll="false" inheritRefs="false">
              <property name="project.dir"    value="@{current.project.dir}"/>
              <property name="target.dir"  value="${ws.dir}/build/forrestdoc"/>  
           </ant>
         </try>
         <catch>
           <echo>In &lt;catch&gt;.</echo>
         </catch>
         <finally>
           <echo>In &lt;finally&gt;.</echo>
         </finally>
       </trycatch>



        </sequential>          
    </for>          
    
   </target>    
   
   
</project>

