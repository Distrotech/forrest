<project name="getsrc">

  <!-- default values -->
  <property name="getsrc.local.root-dir" value=""/>

  <target name="getsrc.local">
    <echo>
      ....... getsrc.local START
      Copying source from ${getsrc.local.root-dir}
    </echo>
    <mkdir dir="${build.work-dir}"/>
    <copy todir="${build.work-dir}">
      <fileset dir="${getsrc.local.root-dir}">
        <include name="forrest.properties"/>
        <include name="status.xml"/>
        <include name="module.xml"/>
      </fileset>
    </copy>
    <echo>Loading ${build.work-dir}/forrest.properties..</echo>
    <loadproperties srcFile="${build.work-dir}/forrest.properties"/>
    <loadproperties srcFile="${bot.home}/core/default-forrest.properties"/>
    <echo>
      Copying source from ${project.root-dir}/${project.content-dir}
    </echo>
    <copy todir="${build.work-dir}/${project.content-dir}">
      <fileset dir="${getsrc.local.root-dir}/${project.content-dir}"/>
    </copy>
    <echo>
      ....... getsrc.local END
    </echo>
  </target>


  <!-- default values -->
  <property name="getsrc.cvs.user" value="anoncvs"/>
  <property name="getsrc.cvs.password" value="anoncvs"/>
  <property name="getsrc.cvs.root" value="/home/cvspublic"/>
  <property name="getsrc.cvs.host" value="cvs.apache.org"/>
  <property name="getsrc.cvs.module" value="${ant.project.name}"/>
  <property name="getsrc.cvs.root-dir" value=""/>
  <property name="getsrc.cvs.tag" value=""/>

  <property name="build.cvsmodule-dir"    location="work/cvsmodules"/>

  <target name="getsrc.cvs">

    <cvspass cvsroot=":pserver:${getsrc.cvs.user}@${getsrc.cvs.host}:${getsrc.cvs.root}" password="${getsrc.cvs.password}"/>

    <echo><![CDATA[<cvs cvsRoot=":pserver:${getsrc.cvs.user}@${getsrc.cvs.host}:${getsrc.cvs.root}"
      package="${getsrc.cvs.module}/${getsrc.cvs.root-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="false"
      command="checkout -l"
      tag="${getsrc.cvs.tag}"
      />]]></echo>

    <cvs cvsRoot=":pserver:${getsrc.cvs.user}@${getsrc.cvs.host}:${getsrc.cvs.root}"
      package="${getsrc.cvs.module}/${getsrc.cvs.root-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="true"
      command="checkout -l"
      tag="${getsrc.cvs.tag}"
      />

    <echo>Loading ${build.cvsmodule-dir}/${getsrc.cvs.module}/${getsrc.cvs.root-dir}/forrest.properties..</echo>
    <loadproperties srcFile="${build.cvsmodule-dir}/${getsrc.cvs.module}/${getsrc.cvs.root-dir}/forrest.properties"/>
    <loadproperties srcFile="${bot.home}/core/default-forrest.properties"/>

    <echo><![CDATA[<cvs cvsRoot=":pserver:${getsrc.cvs.user}@${getsrc.cvs.host}:${getsrc.cvs.root}"
      package="${getsrc.cvs.module}/${getsrc.cvs.root-dir}/${project.content-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="false"
      tag="${getsrc.cvs.tag}"
      />]]></echo>

    <cvs cvsRoot=":pserver:${getsrc.cvs.user}@${getsrc.cvs.host}:${getsrc.cvs.root}"
      package="${getsrc.cvs.module}/${getsrc.cvs.root-dir}/${project.content-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="true"
      tag="${getsrc.cvs.tag}"
      />

    <copy todir="${build.work-dir}">
      <fileset dir="${build.cvsmodule-dir}/${getsrc.cvs.module}/${getsrc.cvs.root-dir}"/>
    </copy>

  </target>

</project>
