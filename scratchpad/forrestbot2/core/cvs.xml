<project name="cvs">

  <property name="user" value="anoncvs"/>
  <property name="password" value="anoncvs"/>
  <property name="root" value="/home/cvspublic"/>
  <property name="host" value="cvs.apache.org"/>
  <property name="module" value="${ant.project.name}"/>
  <property name="tag" value=""/>

  <property name="build.cvsmodule-dir"    location="work/cvsmodules"/>

  <condition property="root-dir" value="/${project.root-dir}">
    <isset property="project.root-dir"/>
  </condition>
  <property name="root-dir" location=""/>

  <target name="getsrc">

    <cvspass cvsroot=":pserver:${user}@${host}:${root}" password="${password}"/>

    <echo><![CDATA[<cvs cvsRoot=":pserver:${user}@${host}:${root}"
      package="${module}${root-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="false"
      command="checkout -l"
      tag="${tag}"
      />]]></echo>

    <cvs cvsRoot=":pserver:${user}@${host}:${root}"
      package="${module}${root-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="true"
      command="checkout -l"
      tag="${tag}"
      />

    <echo>Loading ${build.cvsmodule-dir}/${module}${root-dir}/forrest.properties..</echo>
    <loadproperties srcFile="${build.cvsmodule-dir}/${module}${root-dir}/forrest.properties"/>
    <loadproperties srcFile="${bot.home}/core/default-forrest.properties"/>

    <echo><![CDATA[<cvs cvsRoot=":pserver:${user}@${host}:${root}"
      package="${module}${root-dir}/${project.content-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="false"
      tag="${tag}"
      />]]></echo>

    <cvs cvsRoot=":pserver:${user}@${host}:${root}"
      package="${module}${root-dir}/${project.content-dir}"
      dest="${build.cvsmodule-dir}"
      quiet="true"
      tag="${tag}"
      />

    <copy todir="${build.work-dir}">
      <fileset dir="${build.cvsmodule-dir}/${module}${root-dir}"/>
    </copy>

  </target>


</project>
