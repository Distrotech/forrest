<!-- try.xml ... these are trial build targets which are currently
  undergoing testing. When ready they can be moved into the main build.xml -->

<!-- FIXME: See note below about Ant xmlcatalog -->
<!DOCTYPE project [
<!ENTITY xmlcatalog-include SYSTEM "../../../src/resources/schema/catalog-ant.xcat">
]>

<project default="transform2v11" basedir="."
         name="Doc Transition Trial: transform from v1.0 to v1.1">

<!-- =================================================================== -->
<!-- Initialization target                                               -->
<!-- =================================================================== -->
<target name="transform2v11">

<!-- FIXME: Not sure how to consistently include the Ant xmlcatalog yet.
  This method is working. However, we need to include it everywhere that
  we want to use it. There might be a way to include it in higher build.xml
-->
<echo message="Including the xmlcatalog ..."/>
&xmlcatalog-include;
<echo message="... done."/>

  <property name="v10.dir" value="src/testcases/c2/v10"/>
  <property name="v11.dir" value="src/testcases/c2/v11"/>

  <delete dir="${v11.dir}"/>

  <echo message=""/>
  <echo message="Transforming document files."/>
  <xslt basedir="${v10.dir}"
    destdir="${v11.dir}"
    extension=".xml"
    style="${resource.dir}/library/xslt/docv10todocv11.xsl"
    includes="**/*.xml"
    excludes="css/**, drafts/**, faq/faq**.xml, book.xml, **/book.xml, plan/changes-doc.xml"
  >
    <xmlcatalog refid="forrest-schema">
      <classpath>
        <pathelement location="${resource.dir}/schema" />
      </classpath>
    </xmlcatalog>
  </xslt> 

  <echo message=""/>
  <echo message="Transforming faq files."/>
  <xslt basedir="src/testcases/c2/v10/faq"
    destdir="src/testcases/c2/v11/faq"
    extension=".xml" 
    style="src/resources/library/xslt/faqv10tofaqv11.xsl"
    includes="*.xml"
    excludes="book.xml, index.xml"
  >
    <xmlcatalog refid="forrest-schema">
      <classpath>
        <pathelement location="${resource.dir}/schema" />
      </classpath>
    </xmlcatalog>
  </xslt> 
		   
  <echo message=""/>
  <echo message="Transforming book.xml files."/>
  <xslt basedir="src/testcases/c2/v10"
    destdir="src/testcases/c2/v11"
    extension=".xml" 
    style="src/resources/library/xslt/bookv10.xsl"
    includes="book.xml, **/book.xml"
  >
    <xmlcatalog refid="forrest-schema">
      <classpath>
        <pathelement location="${resource.dir}/schema" />
      </classpath>
    </xmlcatalog>
  </xslt> 
		   
  <echo message=""/>
  <echo message="Transforming changes-doc.xml file."/>
  <xslt basedir="src/testcases/c2/v10/plan"
    destdir="src/testcases/c2/v11/plan"
    extension=".xml" 
    style="src/resources/library/xslt/changesv10tochangesv11.xsl"
    includes="changes-doc.xml"
  >
    <xmlcatalog refid="forrest-schema">
      <classpath>
        <pathelement location="${resource.dir}/schema" />
      </classpath>
    </xmlcatalog>
  </xslt> 
    
</target>
</project>

<!-- End of file -->
