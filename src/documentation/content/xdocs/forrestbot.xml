<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.2//EN"
"document-v12.dtd">
<document>
  <header>
    <title>Forrestbot</title>

    <authors>
      <person email="brondsem@apache.org" name="Dave Brondsema" />
    </authors>
  </header>

  <body>
    <warning>This documentation applies to the forrestbot in CVS, not the
    forrestbot included with Forrest 0.5.1 or any previous release.
    Documentation for that forrestbot is <link href="site:forrestbot-old">here</link>.
    This page is incomplete and may have errors.</warning>

    <section>
      <title>Using Forrestbot</title>

      <p>Simply execute:</p>

      <source>forrest -f mybuildfile.xml</source>

      <p>The next section explains how to create your buildfile.</p>
    </section>

    <section>
      <title>Creating a buildfile</title>

      <p>A sample buildfile:</p>

      <source>&#60;project name=&#34;myproject&#34;&#62;
	&#60;property name=&#34;mail.host&#34; value=&#34;smtp.myhost.com&#34;/&#62;
	&#60;property name=&#34;mail.to&#34; value=&#34;me@myhost.com&#34;/&#62;
	&#60;property name=&#34;administrator&#34; value=&#34;Your Name &#38;lt;me@myhost.com&#62;&#34;/&#62;
	&#60;property name=&#34;user&#34; value=&#34;anoncvs&#34;/&#62;
	&#60;property name=&#34;password&#34; value=&#34;anoncvs&#34;/&#62;
	&#60;property name=&#34;root&#34; value=&#34;/home/cvspublic&#34;/&#62;
	&#60;property name=&#34;host&#34; value=&#34;cvs.myhost.com&#34;/&#62;
	&#60;property name=&#34;module&#34; value=&#34;myproject&#34;/&#62;

	&#60;target name=&#34;notify&#34; depends=&#34;local.notify, email.notify&#34;/&#62;
	&#60;import file=&#34;${env.FORREST_HOME}/../../../scratchpad/forrestbot2/core/forrestbot.xml&#34;/&#62;
&#60;/project&#62;

</source>

      <p>First, set properties needed by the workstages you are going to use.
      Here, we set properties that will be used by notify.email and getsrc.cvs.
      Next, specify what implementations will be used by each workstage. By
      default, &#39;local&#39; will be used.</p>

      <table>
        <tr>
          <th>Workstage</th>

          <th>Implementations</th>
        </tr>

        <tr>
          <td>getsrc</td>

          <td><ul><li>local</li><li>cvs</li></ul></td>
        </tr>

        <tr>
          <td>site</td>

          <td><em>forrest itself</em></td>
        </tr>

        <tr>
          <td>deploy</td>

          <td><ul><li>local</li></ul></td>
        </tr>

        <tr>
          <td>notify</td>

          <td><ul><li>local</li><li>email</li></ul></td>
        </tr>
      </table>

      <p>If you want to do more advanced processing for your project, you can
      override the &#39;main&#39; target, which by default is <code>&#60;target
      name=&#34;main&#34; depends=&#34;getsrc, site, deploy, notify&#34;/&#62;</code>,
      create your own implementation of a workstage, or use any other ant tasks
      to do additional work.</p>
    </section>

    <section>
      <title>Forrestbot design</title>

      <p>Forrest and forrestbot use ant buildfiles extensively. Ant 1.6&#39;s
      import task is used to import multiple buildfiles into a single build. The
      following is the flow of control when running forrestbot:</p>

      <ul>
        <li>Your buildfile<ul><li>forrestbot.xml<ul><li>workstage buildfiles</li><li>forrest.build.xml</li></ul></li></ul></li>
      </ul>

      <p>The workstage buildfiles set up the properties and files so that the
      main forrest buildfile (forrest.build.xml) will run. After it is run,
      other workstages buildfiles can implement reporting, deployment, or other
      post-build activities.</p>

      <p>Your buildfile can specify which workstages you want to use, set
      properties for them, and do any additional pre- and post-processing.</p>
    </section>
  </body>
</document>