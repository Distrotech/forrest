<project name="local">

  <property name="local.root-dir" value="${user.home}/apache/xml/${ant.project.name}/${project.root-dir}"/>
  <property name="build.work-dir"         value="work/${ant.project.name}"/>

  <target name="getsrc">
    <mkdir dir="${build.work-dir}"/>
    <copy todir="${build.work-dir}">
      <fileset dir="${local.root-dir}">
        <include name="forrest.properties"/>
        <include name="status.xml"/>
        <include name="module.xml"/>
      </fileset>
    </copy>
    <loadproperties srcFile="${build.work-dir}/forrest.properties"/>
    <loadproperties srcFile="default-forrest.properties"/>

    <copy todir="${build.work-dir}/${project.content-dir}">
      <fileset dir="${local.root-dir}/${project.content-dir}"/>
    </copy>
  </target>

  <target name="deploy" depends="site" unless="build-failed">
    <mkdir dir="${build.deploy-dir}"/>
    <copy todir="${build.deploy-dir}">
      <fileset dir="${build.work-dir}/${project.site-dir}"/>
    </copy>
  </target>

  <target name="notify" depends="site">
    <tstamp>
      <format property="NOW" pattern="dd MMMM hh:mm aa"/>
    </tstamp>
    <echo>
      ----------------------------------
      Forrestbot run ${completion-status}
      Output in: ${build.deploy-dir}
      Log in:    ${build.logfile-stored}

      Time: ${NOW}
      Using Forrest ${version}
      ----------------------------------
    </echo>
  </target>


</project>
