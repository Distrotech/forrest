<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2002-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE howto PUBLIC "-//APACHE//DTD How-to V2.0//EN" "http://forrest.apache.org/dtd/howto-v20.dtd">
<howto>
  <header>
    <title>How to Build a Plugin</title>

    <version>0.1</version>

    <abstract>This How-To describes the steps necessary to build a plugin for 
    Forrest. Forrest uses plugins to add new input formats, output formats
    and to change its default behaviour. Since plugins are downloaded when
    needed and can be hosted at any location plugin code can be developed 
    independantly of Apache Forrest.</abstract>

    <last-modified-content-date date="2004-11-14" />
  </header>

  <audience title="Intended Audience">
    <p>Users needing to add additional input formats or output formats or
    to change the way Forrest internals work.</p>
    
    <warning>The Plugin Infrastructure is still at an early stage of design 
    and implementation, consequently this How-To <em>may</em> be out of date.
    If you are having problems with any of the steps described, please ask
    for help on the developers mailing list.</warning>
  </audience>

  <purpose title="Purpose">
    <p>This How-To will illustrate how to build a plugin, publish a plugin
    and configure a Forrest project to use their plugin.</p>
  </purpose>

  <prerequisites title="Prerequisites">
    <p>Plugin developers should have:</p>
    
    <ul>
      <li>a basic knowledge of XML, XSLT and Cocoon pipelines</li>
      <li>a clear use-case for extending Forrest</li>
      <li>verified with the Apache Forrest developer community that the
      requried functionality does not already exist</li>
    </ul>
  </prerequisites>

  <steps title="Steps">
    <p>Here is how to proceed.</p>

    <section id="typeOfPlugin">
      <title>Type of Plugin</title>

      <p>There are three types of plugin, each with a clear purpose, you
      must first decide which 
      <a href="site:documentation/developers/pluginInfrastructure">type of plugin</a>
      you need to build.</p>
      
      
    </section>
    
    <section>
      <title>Create Plugin Directory Structure</title>
      <p>Regardless of the type of plugin you are building, the directory
      structure is almost identical. See 
      <a href="site:documentation/developers/pluginInfrastructure">What Does 
      a Forrest Plugin Look Like?</a></p>
    </section>
    
    <section>
      <title>Create the Plugin XMap file</title>
      <p>The plugin <code>xmap</code> file is a Cocoon sitemap that is mounted
      at a strategic place in the Forrest pipeline. It is in this file
      that you will instruct Forrest how to operate. An input plugin
      must provide a <code>input.xmap</code> file, an ouput plugin
      must provide a <code>output.xmap</code> file, whilst an internal
      plugin provides a <code>sitemap.xmap</code> file.</p>
    </section>
    
    <section>
      <title>Create the Necessary Resource Files</title>
      <fixme author="rdg">Discuss the XSL files and other such resources</fixme>
    </section>
    
    <section>
      <title>Create the Documentation</title>
      <fixme author="rdg">Plugin documentation should provide (as a minimum) an
      index page that provides an overview and a set of samples that demonstrate
      the functionlaity of the plugin.</fixme>
    </section>
    
    <section>
      <title>Register the Plugin with Apache Forrest</title>
      <fixme author="rdg">Describe the plugins.xml file</fixme>
      <fixme author="rdg">Describe making a request of Forrest devs for 
      inclusion</fixme>
    </section>
    
    <section>
      <title>Publish the Plugin</title>
      <fixme author="rdg">Describe the generation of the plugin zip and
      the publication of that zip (ant dist)</fixme>
    </section>

    <section id="extension">
      <title>Further Reading</title>
      
      <ul>
        <li><a href="site:documentation/developers/pluginInfrastructure">Plugin Infrastrucuture Documentation</a> for Developers</li>
        <li><a href="site:documentation/plugins">Plugins Documentation</a> for users</li>
      </ul>
    </section>

    <section id="summarise">
      <title>Summarise the Entire Process</title>

      <fixme author="rdg">In a few sentences, remind the reader what they have just learned.
      This helps to reinforce the main points of your How-To.</fixme>
    </section>
  </steps>
</howto>
