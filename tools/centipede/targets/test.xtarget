  <!-- =================================================================== -->
  <!-- Test targets                                                       -->
  <!-- =================================================================== -->
  <target name="test" depends="compile" description="Perform jUnit tests">
    <mkdir dir="${build.test}"/>
    <!-- Copy test files to build test dir -->
    <copy todir="${build.test}" filtering="on">
      <fileset dir="${test.dir}/${test.specific}"/>
    </copy>
    <!-- Compile tests -->
    <javac srcdir="${build.test}"
            destdir="${build.test}"
            debug="${debug}"
            optimize="${optimize}"
            deprecation="${deprecation}"
            target="${target.vm}">
      <classpath refid="classpath"/>
      <classpath>
        <pathelement path="${build.dest}" />
      </classpath>
    </javac>
    <junit printsummary="yes" haltonfailure="yes" fork="yes">
      <classpath>
        <pathelement location="${build.test}" />
        <pathelement location="${build.dest}" />
        <pathelement path="${java.class.path}" />
      </classpath>
      <classpath refid="classpath"/>
      <formatter type="plain" usefile="no" />
      <batchtest>
        <fileset dir="${build.test}">
          <include name="**/test/*TestCase.class"/>
          <include name="**/*Test.class" />
          <include name="**/Test*.class" />
          <exclude name="**/AllTest.class" />
          <exclude name="**/*$$*Test.class" />
        </fileset>
      </batchtest>
    </junit>
  </target>
